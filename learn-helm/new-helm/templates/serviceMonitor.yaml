#apiVersion: v1
#kind: Service
#metadata:
#  name: {{ .Values.component_name }}-metrics
#  namespace: default
#  labels:
#    app: {{ .Values.component_name }}
#    release: kube-prom-stack
#spec:
#  selector:
#    app: {{ .Values.component_name }}
#  ports:
#    - name: metrics
#      port: 9100      # change to your appâ€™s metrics port
#      targetPort: 9100
#---
#apiVersion: monitoring.coreos.com/v1
#kind: ServiceMonitor
#metadata:
#  name: {{ .Values.component_name }}-sm
#  namespace: default
#  labels:
#    release: kube-prom-stack
#spec:
#  namespaceSelector:
#    matchNames: ["default"]
#  selector:
#    matchLabels:
#      app: {{ .Values.component_name }}
#  endpoints:
#    - port: metrics
#      interval: 30s
##      path: /metrics
#
#apiVersion: v1
#kind: Service
#metadata:
#  name: {{ .Values.component_name }}
#spec:
#  type: {{ .Values.service.type }}
#  selector:
#    component: {{ .Values.component_name }}
#  ports:
#    - port: {{ .Values.service.port }}
#      targetPort: {{ .Values.service.containerPort }}